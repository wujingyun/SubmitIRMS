<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core" >
    <h:head>
        <title>Welcome to IRMS</title>
    </h:head>
    <h:body>  
        <f:view>
            <h:form id="PassTicketForm">

                <p:growl id="messages"  showDetail="true"/>

                <p:panel>
                    <h:outputLabel   value="Select Attraction: *" />  
                    <p:column>
                    <h:selectOneMenu id="attraction" value="#{attractionPurchaseManagedBean.attractionName}" required="true">  
                        <f:selectItem itemLabel="Select Attraction" itemValue="" />  
                        <f:selectItems value="#{attractionPurchaseManagedBean.attList}" var="attraction" itemLabel="#{attraction.name}" itemValue="#{attraction.name}"/>  
                        <p:ajax update="passList, purchase" listener="#{attractionPurchaseManagedBean.handleAttractionChange}"/>
                    </h:selectOneMenu>
                    </p:column>
                </p:panel>
    
                
                
                 <p:outputPanel id="Ticket">

                     <p:dataTable var="ticket"  value="#{attractionPurchaseManagedBean.at}" id="passList" editable="true" rowKey="#{ticket.ticketName}" selection="#{attractionPurchaseManagedBean.selectedTicket}" selectionMode="single"> 

                        <f:facet name="header">  
                            IR Passes
                        </f:facet>
                        
                        <p:column headerText="Ticket Name"> 
                            #{ticket.ticketName}
                        </p:column>  

                        <p:column headerText="Ticket Type">
                            <p:cellEditor>  
                                <f:facet name="output">  
                                    <h:outputText value="#{ticket.ticketType}" />  
                                </f:facet>  
                                <f:facet name="input">  
                                    <p:inputText value="#{ticket.ticketType}" style="width:100%"/>  
                                </f:facet>  
                            </p:cellEditor> 
                        </p:column>  

                        <p:column headerText="Ticket Price">  
                            <p:cellEditor>  
                                <f:facet name="output">  
                                    <h:outputText value="#{ticket.ticketPrice}" />  
                                </f:facet>  
                                <f:facet name="input">  
                                    <p:inputText value="#{ticket.ticketPrice}" style="width:100%"/>  
                                </f:facet>  
                            </p:cellEditor> 
                        </p:column>  
   
                    </p:dataTable>
                     
                     
                     
                     
                      <p:panel  header="Purchase Pass" id="purchase" style="margin-bottom:10px;">  
                 <h:panelGrid columns="2" cellpadding="5">  
                      
                            <p:selectOneMenu  id="selectPassId1" value="#{attractionPurchaseManagedBean.selectTicketId1}">  
            <f:selectItem itemLabel="Select One" itemValue="" />  
            <f:selectItems value="#{attractionPurchaseManagedBean.atList}" />
            <p:ajax  listener="#{attractionPurchaseManagedBean.handlepassChange()}" />  
                   </p:selectOneMenu> 
                           
                     <p:selectOneMenu value="#{attractionPurchaseManagedBean.quantity4}">  
                                
            <f:selectItem itemLabel="0" itemValue="0" />  
            <f:selectItem itemLabel="1" itemValue="1" />  
            <f:selectItem itemLabel="2" itemValue="2" />  
            <f:selectItem itemLabel="3" itemValue="3" />  
            <f:selectItem itemLabel="4" itemValue="4" />  
            <f:selectItem itemLabel="5" itemValue="5" />  
            <f:selectItem itemLabel="6" itemValue="6" />  
            <f:selectItem itemLabel="7" itemValue="7" />  
            <f:selectItem itemLabel="8" itemValue="8" />  
            <f:selectItem itemLabel="9" itemValue="9" />  
            <f:selectItem itemLabel="10" itemValue="10" />  
            <p:ajax  listener="#{attractionPurchaseManagedBean.handlepassChange()}" />  
        </p:selectOneMenu>  
                     
                     
                      <p:column headerText="Select pass">   </p:column> 
                            <p:selectOneMenu value="#{attractionPurchaseManagedBean.selectTicketId2}">  
            <f:selectItem itemLabel="Select One" itemValue="" />  
            <f:selectItems value="#{attractionPurchaseManagedBean.atList}" />
             <p:ajax  listener="#{attractionPurchaseManagedBean.handlepassChange()}" />  
            </p:selectOneMenu>    
                     
                            <p:selectOneMenu value="#{attractionPurchaseManagedBean.quantity5}">  
            <f:selectItem itemLabel="0" itemValue="0" />  
            <f:selectItem itemLabel="1" itemValue="1" />  
            <f:selectItem itemLabel="2" itemValue="2" />  
            <f:selectItem itemLabel="3" itemValue="3" />  
            <f:selectItem itemLabel="4" itemValue="4" />  
            <f:selectItem itemLabel="5" itemValue="5" />  
            <f:selectItem itemLabel="6" itemValue="6" />  
            <f:selectItem itemLabel="7" itemValue="7" />  
            <f:selectItem itemLabel="8" itemValue="8" />  
            <f:selectItem itemLabel="9" itemValue="9" />  
            <f:selectItem itemLabel="10" itemValue="10" />  
             <p:ajax  listener="#{attractionPurchaseManagedBean.handlepassChange()}" />  
        </p:selectOneMenu>  
                       
                      <p:column headerText="Select pass">  
                            <p:selectOneMenu value="#{attractionPurchaseManagedBean.selectTicketId3}">  
            <f:selectItem itemLabel="Select One" itemValue="" />  
           <f:selectItems value="#{attractionPurchaseManagedBean.atList}" />
            <p:ajax  listener="#{attractionPurchaseManagedBean.handlepassChange()}" />  
                            </p:selectOneMenu>   
                            <p:selectOneMenu value="#{attractionPurchaseManagedBean.quantity6}">  
            <f:selectItem itemLabel="0" itemValue="0" />  
            <f:selectItem itemLabel="1" itemValue="1" />  
            <f:selectItem itemLabel="2" itemValue="2" />  
            <f:selectItem itemLabel="3" itemValue="3" />  
            <f:selectItem itemLabel="4" itemValue="4" />  
            <f:selectItem itemLabel="5" itemValue="5" />  
            <f:selectItem itemLabel="6" itemValue="6" />  
            <f:selectItem itemLabel="7" itemValue="7" />  
            <f:selectItem itemLabel="8" itemValue="8" />  
            <f:selectItem itemLabel="9" itemValue="9" />  
            <f:selectItem itemLabel="10" itemValue="10" />  
             <p:ajax  listener="#{attractionPurchaseManagedBean.handlepassChange()}" />  
        </p:selectOneMenu>  
                        </p:column> 
                      </h:panelGrid>  
                      </p:panel>
                </p:outputPanel>
                 
                
                
            </h:form>
            <h:form id="form" style="margin-left:35%;">
                    <h:outputLink id="loginLink" value="javascript:void(0)" onclick="dlg.show()" title="login" >	
                        <p:graphicImage value="/resources/img/login22.png"   title="Login"/>
                    </h:outputLink>
                    
                    
                    <p:growl id="growl" showDetail="true" life="3000" />
                    
                    <p:dialog id="dialog" header="Login" widgetVar="dlg" resizable="false">

                        <h:panelGrid columns="2" cellpadding="5">
                            <h:outputLabel for="username" value="Username:" />
                            <p:inputText value="#{attractionPurchaseManagedBean.username}" 
                                         id="username" required="true" label="username" />

                            <h:outputLabel for="password" value="Password:" />
                            <h:inputSecret value="#{attractionPurchaseManagedBean.password}" 
                                           id="password" required="true" label="password" />

                           
                            <f:facet name="footer">
                                <p:commandButton id="loginButton" value="Login" update="msg" 
                                                 actionListener="#{attractionPurchaseManagedBean.login}" 
                                                />
                            </f:facet>
                               <p:growl id="msg" showDetail="true"/>  
                        </h:panelGrid>
                    </p:dialog>
                    <p:commandButton value="Buy Ticket" ajax="false" update="msgs" actionListener="#{attractionPurchaseManagedBean.BookTicket}" id="btnSubmit" />  
    <p:growl id="msgs" showDetail="true"/>  
                </h:form>
        </f:view>
    </h:body>
</html>


