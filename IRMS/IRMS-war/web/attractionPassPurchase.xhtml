<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./templet/customerWebPortal.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core" >

    <ui:define name="content">

        <div id="content" class="center_content" >  

            <div class="container" style="width:75%">

                <h:body>  
                    <f:view>
                        <h:form id="PassTicketForm">

                            <p:growl id="messages"  showDetail="true"/>

                            <p:breadCrumb> 
                                <p:menuitem value="Coral Home Page" url="/index.xhtml" />  
                                <p:menuitem value="Attraction" url="#" />  
                                <p:menuitem value="Pass Purchase" url="#" /> 
                            </p:breadCrumb>

                            <p:panel>
                                <h:outputLabel   value="Select Attraction: *" />  
                                <p:column>
                                    <h:selectOneMenu id="attraction" value="#{attractionPurchaseManagedBean.attractionName}" required="true">  
                                        <f:selectItem itemLabel="Select Attraction" itemValue="" />  
                                        <f:selectItems value="#{attractionPurchaseManagedBean.attList}" var="attraction" itemLabel="#{attraction.name}" itemValue="#{attraction.name}"/>  
                                        <p:ajax update="passList, purchase" listener="#{attractionPurchaseManagedBean.handleAttractionChange}"/>
                                    </h:selectOneMenu>
                                </p:column>
                            </p:panel>



                            <p:outputPanel id="passes">

                                <p:dataTable var="pass"  value="#{attractionPurchaseManagedBean.ap}" id="passList" editable="true" rowKey="#{pass.passName}" selection="#{attractionPurchaseManagedBean.selectedPass}" selectionMode="single"> 

                                    <f:facet name="header">  
                                        IR Passes
                                    </f:facet>

                                    <p:column headerText="pass Name"> 
                                        #{pass.passName}
                                    </p:column>  

                                    <p:column headerText="Pass Type">
                                        <p:cellEditor>  
                                            <f:facet name="output">  
                                                <h:outputText value="#{pass.passType}" />  
                                            </f:facet>  
                                            <f:facet name="input">  
                                                <p:inputText value="#{pass.passType}" style="width:100%"/>  
                                            </f:facet>  
                                        </p:cellEditor> 
                                    </p:column>  

                                    <p:column headerText="Pass Price">  
                                        <p:cellEditor>  
                                            <f:facet name="output">  
                                                <h:outputText value="#{pass.price}" />  
                                            </f:facet>  
                                            <f:facet name="input">  
                                                <p:inputText value="#{pass.price}" style="width:100%"/>  
                                            </f:facet>  
                                        </p:cellEditor> 
                                    </p:column>  

                                </p:dataTable>




                                <p:panel  header="Purchase Pass" id="purchase" style="margin-bottom:10px;">  
                                    <h:panelGrid columns="1" cellpadding="5">  
                                        <p:row>
                                            <p:selectOneMenu  id="selectPassId1" value="#{attractionPurchaseManagedBean.selectPassId1}">  
                                                <f:selectItem itemLabel="Select One" itemValue="" />  
                                                <f:selectItems value="#{attractionPurchaseManagedBean.apList}" />
                                                <p:ajax  listener="#{attractionPurchaseManagedBean.handlepassChange()}" />  
                                            </p:selectOneMenu> 

                                            <p:selectOneMenu value="#{attractionPurchaseManagedBean.quantity1}">  

                                                <f:selectItem itemLabel="0" itemValue="0" />  
                                                <f:selectItem itemLabel="1" itemValue="1" />  
                                                <f:selectItem itemLabel="2" itemValue="2" />  
                                                <f:selectItem itemLabel="3" itemValue="3" />  
                                                <f:selectItem itemLabel="4" itemValue="4" />  
                                                <f:selectItem itemLabel="5" itemValue="5" />  
                                                <f:selectItem itemLabel="6" itemValue="6" />  
                                                <f:selectItem itemLabel="7" itemValue="7" />  
                                                <f:selectItem itemLabel="8" itemValue="8" />  
                                                <f:selectItem itemLabel="9" itemValue="9" />  
                                                <f:selectItem itemLabel="10" itemValue="10" />  
                                                <p:ajax  listener="#{attractionPurchaseManagedBean.handlepassChange()}" />  
                                            </p:selectOneMenu>  

                                        </p:row>
                                        <p:row>
                                            <p:column headerText="Select pass">   </p:column> 
                                            <p:selectOneMenu value="#{attractionPurchaseManagedBean.selectPassId2}">  
                                                <f:selectItem itemLabel="Select One" itemValue="" />  
                                                <f:selectItems value="#{attractionPurchaseManagedBean.apList}" />
                                                <p:ajax  listener="#{attractionPurchaseManagedBean.handlepassChange()}" />  
                                            </p:selectOneMenu>    

                                            <p:selectOneMenu value="#{attractionPurchaseManagedBean.quantity2}">  
                                                <f:selectItem itemLabel="0" itemValue="0" />  
                                                <f:selectItem itemLabel="1" itemValue="1" />  
                                                <f:selectItem itemLabel="2" itemValue="2" />  
                                                <f:selectItem itemLabel="3" itemValue="3" />  
                                                <f:selectItem itemLabel="4" itemValue="4" />  
                                                <f:selectItem itemLabel="5" itemValue="5" />  
                                                <f:selectItem itemLabel="6" itemValue="6" />  
                                                <f:selectItem itemLabel="7" itemValue="7" />  
                                                <f:selectItem itemLabel="8" itemValue="8" />  
                                                <f:selectItem itemLabel="9" itemValue="9" />  
                                                <f:selectItem itemLabel="10" itemValue="10" />  
                                                <p:ajax  listener="#{attractionPurchaseManagedBean.handlepassChange()}" />  
                                            </p:selectOneMenu>  
                                            </p:row>
                                            <p:row>
                                                <p:column headerText="Select pass">  
                                                    <p:selectOneMenu value="#{attractionPurchaseManagedBean.selectPassId3}">  
                                                        <f:selectItem itemLabel="Select One" itemValue="" />  
                                                        <f:selectItems value="#{attractionPurchaseManagedBean.apList}" />
                                                        <p:ajax  listener="#{attractionPurchaseManagedBean.handlepassChange()}" />  
                                                    </p:selectOneMenu>   
                                                    <p:selectOneMenu value="#{attractionPurchaseManagedBean.quantity3}">  
                                                        <f:selectItem itemLabel="0" itemValue="0" />  
                                                        <f:selectItem itemLabel="1" itemValue="1" />  
                                                        <f:selectItem itemLabel="2" itemValue="2" />  
                                                        <f:selectItem itemLabel="3" itemValue="3" />  
                                                        <f:selectItem itemLabel="4" itemValue="4" />  
                                                        <f:selectItem itemLabel="5" itemValue="5" />  
                                                        <f:selectItem itemLabel="6" itemValue="6" />  
                                                        <f:selectItem itemLabel="7" itemValue="7" />  
                                                        <f:selectItem itemLabel="8" itemValue="8" />  
                                                        <f:selectItem itemLabel="9" itemValue="9" />  
                                                        <f:selectItem itemLabel="10" itemValue="10" />  
                                                        <p:ajax  listener="#{attractionPurchaseManagedBean.handlepassChange()}" />  
                                                    </p:selectOneMenu>  
                                                </p:column> 
                                            </p:row>
                                    </h:panelGrid>  
                                </p:panel>
                            </p:outputPanel>



                        </h:form>
                        <h:form id="form" style="margin-left:35%;">


                            <p:commandButton id="loginLink" value="Please login to buy pass" onclick="dlg.show()" title="login" />  

                            <p:growl id="growl" showDetail="true" life="3000" />

                            <p:dialog id="dialog" header="Login" widgetVar="dlg" resizable="false">

                                <h:panelGrid columns="2" cellpadding="5">
                                    <h:outputLabel for="username" value="Username:" />
                                    <p:inputText value="#{attractionPurchaseManagedBean.username}" 
                                                 id="username" required="true" label="username" />

                                    <h:outputLabel for="password" value="Password:" />
                                    <h:inputSecret value="#{attractionPurchaseManagedBean.password}" 
                                                   id="password" required="true" label="password" />


                                    <f:facet name="footer">
                                        <p:commandButton id="loginButton" value="Login" update="msg" 
                                                         actionListener="#{attractionPurchaseManagedBean.loginBuyPass}" 
                                                         />
                                    </f:facet>
                                    <p:growl id="msg" showDetail="true"/>  
                                </h:panelGrid>
                            </p:dialog>
                            <p:growl id="msgs" showDetail="true"/>  
                        </h:form>
                    </f:view>
                </h:body>

            </div>

        </div>

    </ui:define>

</ui:composition>



